<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting…</title>

  <!-- Google Analytics GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QWN8TWGZ3Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-QWN8TWGZ3Q', {
      page_title: 'QR Redirect',
      page_location: window.location.href
    });

    console.log('[QR] GA4 initialized');
  </script>

  <script>
    (function () {
      console.log('[QR] Redirect page loaded');

      const params = new URLSearchParams(window.location.search);

      // Default to empty strings if params are missing
      const gp = params.get('gp') || '';
      const village = params.get('village') || '';
      const hamlet = params.get('hamlet') || '';

      console.log('[QR] Extracted parameters:', {
        gp: gp,
        village: village,
        hamlet: hamlet
      });

      try {
        gtag('event', 'qr_scan', {
          'send_to': 'G-QWN8TWGZ3Q', // Optional if only one config exists
          'gp': gp,
          'village': village,
          'hamlet': hamlet,
          'transport_type': 'beacon',
          'debug_mode': true // FIXED: Added missing opening quote
        });

        console.log('[QR] qr_scan event fired');
      } catch (err) {
        console.error('[QR] Failed to fire qr_scan event', err);
      }

      setTimeout(function () {
        console.log('[QR] Redirecting now…');
        window.location.href = "https://youtu.be/Pmtx3IDo5KI";
      }, 800);
    })();
  </script>

</head>
<body>
  Redirecting…
</body>
</html>

is this code correct? what is wrong or needs to be changed? you don't have to open the youtube link
